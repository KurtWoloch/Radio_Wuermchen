# 2026-02-17

## Radio Würmchen - Major Development Day

### Code Changes (all committed & pushed)
- **Charts scraper** (`charts_scraper.py`): Scrapes Austrian Singles Top 75 from austriancharts.at, matches against library, prioritizes chart songs in the "Music for Young People" pool with position annotations
- **DJ chart awareness**: Orchestrator tells DJ when the last played song is on the charts, pool entries show chart positions
- **Charts integration in orchestrator**: Checks once per day, triggers pool regeneration when charts change
- **German TTS fallback**: `tts_generate.py` auto-detects German text (umlaut count) and switches to Microsoft Hedda voice for local SAPI fallback
- **Wishlist fix**: Songs rejected by history check no longer added to wishlist
- **History trimming**: DJ history now caps at 50 entries (was unlimited, had grown to 114)
- **Charts lookup bug fix**: Moved charts check after `last_track_name` is set
- **Pool removal fixes**: Show-specific pool files now used for removal (was always using default pool); exact entry matching in fallback to avoid wrong-version removal
- **DJ fallback**: When DJ brain fails (503/unavailable), next song from suggestion pool is queued instead of repeating last song
- **Model update**: DJ config updated from deprecated `gemini-2.5-flash-preview-09-2025` to stable `gemini-2.5-flash`
- **Mr. Pappa's Rock Show**: New show added with custom `suggestion_pool_night_rock.txt`, planned for 0:00-6:00 (nighttime for Kurt, evening for Andrew in Indianapolis)

### Going Public
- **Port forwarding attempted** on Huawei B535 (4G/LTE router) — doesn't work due to CGNAT (carrier: Yesss/A1)
- **ngrok installed and working**: Tunnel to Icecast on port 8000
  - URL: `https://vanessa-unreceptive-dia.ngrok-free.dev/stream` (changes on restart)
  - Free tier: random URLs, bandwidth limits
- **First external listener**: Andrew from Indianapolis (Andon FM community), sent him the ngrok URL
- **Sleep mode disabled** (`powercfg /change standby-timeout-ac 0`) to keep PC running overnight
- **Next steps for stable public access**: Buy a cheap domain + Cloudflare Tunnel (free, stable URL)

### Icecast Config (still TODO)
- Needs hostname, location, admin email for YP directory listings
- Passwords still default "hackme"
- Will configure once stable domain is set up

### Notes
- Stream endpoint is `/stream` (not `/radio.mp3`)
- Geocities.ws page considered for embedding player: `https://geocities.ws/kurt_woloch/radio.htm`
- Carrier is Yesss (A1 subsidiary) — CGNAT blocks direct port forwarding
