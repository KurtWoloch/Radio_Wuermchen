# Memory for 2026-02-19

## Radio Würmchen - Show Tuning (done by Kurt on 2026-02-18)

### Show Changes
- **Night Rock**: Dropped Andrew Pappas' name, added The Rolling Stones, refreshed suggestion pool
- **Friendly**: Got a new custom suggestion pool
- **Evergreen**: New suggestion pool + added instruction "The Beatles, Elvis and everything in between" — this pulls it away from Ratpack overlap and focuses on rockier oldies and groups. Working well.
- **Music Box**: Went through two phases:
  1. First set to "Alternative Rock" with specific artists (Foo Fighters, RATM etc.)
  2. Then Kurt researched the real Ö3 "Music Box" show (cancelled ~30 years ago) and made it more like that — more experimental and deep tracks, suggests artists not in library yet (e.g. Voodoo Jürgens)
- **Espresso**: Not yet tweaked — played too many older songs, not enough modern electropop for Kurt's taste

### Planned
- **General suggestion pool** for show-less stretches (unattended listening): Would drop all "Kurt Woloch" tracks, play popular tracks the AI doesn't usually pick. Library has ~7,500 popular tracks + ~10,000 less popular (B-sides, LP tracks, non-charting).

### Important Paths
- **Radio station folder**: `C:\Users\kurt_\.openclaw\workspace\radio-wuermchen` (in the workspace!)
- **ngrok**: `C:\Users\kurt_\AppData\Local\Microsoft\WinGet\Packages\Ngrok.Ngrok_Microsoft.Winget.Source_8wekyb3d8bbwe\ngrok.exe`
- Created `start_external_stream.bat` in the radio folder — starts ngrok, waits, then prints the public URL

### Listener Backchannel
- Built `listener_server.py` — Python HTTP server on port 8001
  - Serves station page with embedded audio player, "recently played", current show name
  - Has a request form that writes to `listener_request.txt` (already read by `dj_orchestrator.py`)
  - Proxies `/stream` to local Icecast on port 8000
  - Rate-limited: 1 request per IP per 2 minutes
  - Logs all requests to `listener_requests.log`
- **Architecture**: ngrok tunnels port 8001 (listener server), NOT 8000 (Icecast). The listener server proxies the stream from Icecast. This way one free ngrok tunnel handles everything.
- `start_external_stream.bat` updated to start both listener server + ngrok, then print URLs
- ⚠️ Accidentally killed all python processes including radio streamer — Kurt needs to restart it

### Show Transition System (Orchestrator)
- **Lookahead**: Shows detected 4 minutes early (SHOW_LOOKAHEAD_MINUTES = 4) so prep starts before the hour
- **Transition detection**: Tracks `last_show_id` — when it changes, triggers transition logic
- **On transition**: DJ is instructed to announce show name + theme; weather/news skipped
- **Signations**: Shows can have `"signation"` in shows_schedule.json overrides — a track forced as first track
  - Evergreen: "Ray Conniff & Billy Butterfield - Alexander's ragtime band"
  - Espresso: "Jean-Claude Petit - Stars"
  - DJ writes the announcement, orchestrator overrides the track selection with the signation
- **Power saving**: Tracks show ID changes even in power-save mode to avoid false transitions on wake

### OpenClaw Sessions Location
- Kurt couldn't find session transcripts — they're at `C:\Users\kurt_\.openclaw\agents\main\sessions`
